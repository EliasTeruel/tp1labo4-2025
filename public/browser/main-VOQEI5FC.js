import{a as Y,b as h,c as D,d as K,e as Ze,f as ae,g as Z,h as le,i as Qe,j as se,k as ce,l as me,m as de,n as ue,o as Xe,p as $e,q as pe,r as ge,s as Q,t as fe,u as et}from"./chunk-XD2J5BTV.js";import{a as ze,b as He,c as Be,d as Ge,e as k,f as re,g as Je,h as Ye,i as Ke,j as tt,k as nt}from"./chunk-P2EOPVMP.js";import{$a as r,Aa as v,Cb as Ve,Db as qe,Ea as d,Eb as P,Fb as oe,Gb as _,K as ee,La as c,Lb as j,Ma as we,Mb as M,Na as Te,Nb as L,Oa as i,P as te,Pa as t,Qa as u,Ra as I,Sa as w,Ta as F,Ua as p,Va as f,W as O,X as E,ab as C,bb as x,cb as U,db as N,eb as T,g as Ue,gb as $,hb as Re,ib as ne,jb as ie,lb as We,pa as Ne,ra as l,va as g}from"./chunk-V6QLALC3.js";import"./chunk-LJ5XHLMQ.js";import{a as Le,b as Ae,h as b}from"./chunk-FK42CRUA.js";var S=class a{constructor(e){this.http=e;let o=localStorage.getItem("savedUserMail");o&&this.userInfoSubject.next({email:o})}apiUrl=M.apiUrl;userInfoSubject=new Ue(null);userInfo$=this.userInfoSubject.asObservable();register(e){let o=new FormData;return o.append("email",e.email),o.append("password",e.password),o.append("name",e.name),o.append("age",e.age.toString()),e.avatar&&o.append("avatar",e.avatar),this.http.post(`${this.apiUrl}/auth/register`,o)}resendVerificationEmail(e){return this.http.post(`${this.apiUrl}/auth/resend-verification`,{email:e})}setUserInfo(e){localStorage.setItem("savedUserMail",e),this.userInfoSubject.next({email:e})}clearUserInfo(){localStorage.removeItem("savedUserMail"),this.userInfoSubject.next(null)}getCurrentUserEmail(){return localStorage.getItem("savedUserMail")}static \u0275fac=function(o){return new(o||a)(te(ze))};static \u0275prov=ee({token:a,factory:a.\u0275fac,providedIn:"root"})};function at(a,e){a&1&&(i(0,"div"),r(1,"El correo electr\xF3nico es obligatorio."),t())}function lt(a,e){a&1&&(i(0,"div"),r(1,"Ingrese un correo electr\xF3nico v\xE1lido."),t())}function st(a,e){if(a&1&&(i(0,"div",16),d(1,at,2,0,"div",12)(2,lt,2,0,"div",12),t()),a&2){let o=f();l(),c("ngIf",o.userMail==null||o.userMail.errors==null?null:o.userMail.errors.required),l(),c("ngIf",o.userMail==null||o.userMail.errors==null?null:o.userMail.errors.email)}}function ct(a,e){a&1&&(i(0,"div"),r(1,"La contrase\xF1a es obligatoria."),t())}function mt(a,e){a&1&&(i(0,"div"),r(1,"M\xEDnimo 6 caracteres."),t())}function dt(a,e){if(a&1&&(i(0,"div",16),d(1,ct,2,0,"div",12)(2,mt,2,0,"div",12),t()),a&2){let o=f();l(),c("ngIf",o.userPWD==null||o.userPWD.errors==null?null:o.userPWD.errors.required),l(),c("ngIf",o.userPWD==null||o.userPWD.errors==null?null:o.userPWD.errors.minlength)}}function ut(a,e){if(a&1&&(i(0,"div",17),r(1),t()),a&2){let o=f();l(),x(" ",o.errorMessage," ")}}function pt(a,e){a&1&&(i(0,"span"),r(1,"Iniciar Sesi\xF3n"),t())}function gt(a,e){a&1&&u(0,"span",18)}function ft(a,e){if(a&1){let o=F();i(0,"div",19)(1,"p"),r(2,"El correo ingresado no est\xE1 registrado."),t(),i(3,"button",20),p("click",function(){O(o);let s=f();return E(s.register())}),r(4," Registrarse "),t()()}}var Fe=j(M.apiUrl,M.publicAnonKey),ve=class a{constructor(e,o,n){this.fb=e;this.router=o;this.authService=n;this.loginForm=this.fb.group({userMail:["",[h.required,h.email]],userPWD:["",[h.required,h.minLength(6)]]})}loginForm;userNotFound=!1;errorMessage="";isLoading=!1;ngOnInit(){let e=localStorage.getItem("UserMailRegistered"),o=localStorage.getItem("UserPWDRegisted");localStorage.removeItem("swapUserMail"),e&&o&&this.loginForm.patchValue({userMail:e,userPWD:o})}get userMail(){return this.loginForm.get("userMail")}get userPWD(){return this.loginForm.get("userPWD")}checkIfUserExists(){return b(this,null,function*(){let e=this.userMail?.value;if(this.userMail?.valid)try{let{data:o,error:n}=yield Fe.auth.signInWithOtp({email:e,options:{shouldCreateUser:!1}});this.userNotFound=!!n}catch{this.userNotFound=!0}})}quickLogin(){let e="eliasteruel96@gmail.com";e&&this.loginForm.patchValue({userMail:e,userPWD:"123456"})}login(){return b(this,null,function*(){if(this.loginForm.invalid){this.markAllAsTouched();return}this.errorMessage="",this.isLoading=!0;let{userMail:e,userPWD:o}=this.loginForm.value;try{let{data:n,error:s}=yield Fe.auth.signInWithPassword({email:e,password:o});s?this.handleLoginError(s):(yield this.updateLastLogin(n.user.id),this.authService.setUserInfo(e),localStorage.setItem("savedUserMail",e),this.router.navigate(["/home"]),localStorage.removeItem("UserMailRegistered"),localStorage.removeItem("UserPWDRegisted"))}catch{this.errorMessage="Error en el inicio de sesi\xF3n. Int\xE9ntalo de nuevo."}finally{this.isLoading=!1}})}updateLastLogin(e){return b(this,null,function*(){try{let{error:o}=yield Fe.from("users-data").update({last_login:new Date().toISOString()}).eq("authId",e);if(o)throw o}catch(o){console.error("Error actualizando last_login:",o)}})}markAllAsTouched(){Object.values(this.loginForm.controls).forEach(e=>{e.markAsTouched()})}handleLoginError(e){e.message.includes("Invalid login credentials")?this.errorMessage="Contrase\xF1a o Email incorrecto.":e.message.includes("Email not confirmed")?this.errorMessage="Por favor confirma tu correo electr\xF3nico primero.":this.errorMessage="Error en el inicio de sesi\xF3n. Int\xE9ntalo de nuevo."}register(){let e=this.userMail?.value;localStorage.setItem("swapUserMail",e),this.router.navigate(["/register"])}static \u0275fac=function(o){return new(o||a)(g(ge),g(k),g(S))};static \u0275cmp=v({type:a,selectors:[["app-login"]],decls:22,vars:12,consts:[[1,"login-container"],[1,"login-card"],[1,"login-title"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","userMail",1,"form-label"],["id","userMail","formControlName","userMail","type","email","placeholder","tucorreo@ejemplo.com",1,"form-control",3,"input"],["class","invalid-feedback",4,"ngIf"],["for","userPWD",1,"form-label"],["id","userPWD","formControlName","userPWD","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control"],["class","alert alert-danger","role","alert",4,"ngIf"],["type","submit",1,"btn","btn-login",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-quick-login",3,"click"],["class","register-prompt",4,"ngIf"],[1,"invalid-feedback"],["role","alert",1,"alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"register-prompt"],["type","button",1,"btn","btn-register",3,"click"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Ingresar Usuario"),t(),i(4,"form",3),p("ngSubmit",function(){return n.login()}),i(5,"div",4)(6,"label",5),r(7,"Correo electr\xF3nico"),t(),i(8,"input",6),p("input",function(){return n.checkIfUserExists()}),t(),d(9,st,3,2,"div",7),t(),i(10,"div",4)(11,"label",8),r(12,"Contrase\xF1a"),t(),u(13,"input",9),d(14,dt,3,2,"div",7),t(),d(15,ut,2,1,"div",10),i(16,"button",11),d(17,pt,2,0,"span",12)(18,gt,1,0,"span",13),t(),i(19,"button",14),p("click",function(){return n.quickLogin()}),r(20," Ingreso R\xE1pido "),t(),d(21,ft,5,0,"div",15),t()()()),o&2&&(l(4),c("formGroup",n.loginForm),l(4),we("is-invalid",(n.userMail==null?null:n.userMail.invalid)&&((n.userMail==null?null:n.userMail.dirty)||(n.userMail==null?null:n.userMail.touched))),l(),c("ngIf",(n.userMail==null?null:n.userMail.invalid)&&((n.userMail==null?null:n.userMail.dirty)||(n.userMail==null?null:n.userMail.touched))),l(4),we("is-invalid",(n.userPWD==null?null:n.userPWD.invalid)&&((n.userPWD==null?null:n.userPWD.dirty)||(n.userPWD==null?null:n.userPWD.touched))),l(),c("ngIf",(n.userPWD==null?null:n.userPWD.invalid)&&((n.userPWD==null?null:n.userPWD.dirty)||(n.userPWD==null?null:n.userPWD.touched))),l(),c("ngIf",n.errorMessage),l(),c("disabled",n.loginForm.invalid||n.isLoading),l(),c("ngIf",!n.isLoading),l(),c("ngIf",n.isLoading),l(3),c("ngIf",n.userNotFound&&(n.userMail==null?null:n.userMail.valid)))},dependencies:[fe,Z,Y,D,K,se,ce,_,P,Q],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:2rem;background:linear-gradient(135deg,#b507071a,#fffc)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000001a;padding:2.5rem;width:100%;max-width:500px;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]:hover{box-shadow:0 15px 35px #00000026}.login-container[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{color:#b50707;font-family:Poppins,sans-serif;font-weight:600;text-align:center;margin-bottom:2rem;font-size:1.8rem}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.login-container[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:500;color:#333;font-size:.9rem}.login-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;transition:all .3s ease;background-color:#ffffffe6}.login-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#b50707;box-shadow:0 0 0 3px #b5070733;outline:none}.login-container[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.login-container[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d}.login-container[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.8rem;margin-top:.25rem}.login-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:8px;font-size:.9rem;text-align:center}.login-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem;border-radius:8px;font-family:Poppins,sans-serif;font-weight:500;border:none;cursor:pointer;transition:all .3s ease;text-align:center;width:100%}.login-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{background-color:#b50707;color:#fff}.login-container[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#840505;transform:translateY(-2px)}.login-container[_ngcontent-%COMP%]   .btn-quick-login[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333;border:1px solid #ddd}.login-container[_ngcontent-%COMP%]   .btn-quick-login[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.login-container[_ngcontent-%COMP%]   .register-prompt[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:#6c757d}.login-container[_ngcontent-%COMP%]   .register-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem}.login-container[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.login-container[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]:hover{background-color:#1e7e34}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{padding:1.5rem}.login-container[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1.5rem}}"]})};function bt(a,e){if(a&1){let o=F();I(0),i(1,"a",9),p("click",function(){O(o);let s=f();return E(s.jugarJuego("ahorcado"))}),r(2,"Jugar!"),t(),w()}}function vt(a,e){if(a&1){let o=F();I(0),i(1,"a",9),p("click",function(){O(o);let s=f();return E(s.jugarJuego("preguntados"))}),r(2,"Jugar!"),t(),w()}}function _t(a,e){if(a&1){let o=F();I(0),i(1,"a",9),p("click",function(){O(o);let s=f();return E(s.jugarJuego("mayorMenor"))}),r(2,"Jugar!"),t(),w()}}function ht(a,e){if(a&1){let o=F();I(0),i(1,"a",9),p("click",function(){O(o);let s=f();return E(s.jugarJuego("2048"))}),r(2,"Jugar!"),t(),w()}}var tn=j(M.apiUrl,M.publicAnonKey),_e=class a{constructor(e,o){this.router=e;this.supabase=o}usersdata=[];isLoggedIn=!1;authSubscription;ngOnInit(){this.authSubscription=this.supabase.authChanges.subscribe(e=>{this.isLoggedIn=!!e}),this.supabase.getSession().then(e=>{this.isLoggedIn=!!e}),localStorage.removeItem("UserMailRegistered"),localStorage.removeItem("UserPWDRegisted")}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}jugarJuego(e){console.log("Juego:",e),this.router.navigate([`/games/${e}`])}static \u0275fac=function(o){return new(o||a)(g(k),g(L))};static \u0275cmp=v({type:a,selectors:[["app-home"]],decls:25,vars:4,consts:[[1,"card-container"],[1,"card"],["src","/ahorcado.png","alt","ahorcado",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[4,"ngIf"],["src","/preguntados.png","alt","preguntados",1,"card-img-top"],["src","/mayorMenor.png","alt","mayor-menor",1,"card-img-top"],["src","/2048.png","alt","2048",1,"card-img-top"],[1,"btn","btn-custom",3,"click"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1),u(2,"img",2),i(3,"div",3)(4,"h5",4),r(5,"Ahorcado"),t(),d(6,bt,3,0,"ng-container",5),t()(),i(7,"div",1),u(8,"img",6),i(9,"div",3)(10,"h5",4),r(11,"Preguntados"),t(),d(12,vt,3,0,"ng-container",5),t()(),i(13,"div",1),u(14,"img",7),i(15,"div",3)(16,"h5",4),r(17,"Mayor o Menor"),t(),d(18,_t,3,0,"ng-container",5),t()(),i(19,"div",1),u(20,"img",8),i(21,"div",3)(22,"h5",4),r(23,"2048"),t(),d(24,ht,3,0,"ng-container",5),t()()()),o&2&&(l(6),c("ngIf",n.isLoggedIn),l(6),c("ngIf",n.isLoggedIn),l(6),c("ngIf",n.isLoggedIn),l(6),c("ngIf",n.isLoggedIn))},dependencies:[_,P],styles:[".card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;margin:20px}.card[_ngcontent-%COMP%]{margin:15px;width:18rem;height:25rem;display:flex;flex-direction:column;justify-content:space-between;border:none;transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 20px #0003}.card[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{border-radius:.5rem;width:100%;height:100%;object-fit:contain}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;flex-grow:1;text-align:center}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.25rem;color:#333;font-weight:700;margin-bottom:10px}.card[_ngcontent-%COMP%]   .btn-custom[_ngcontent-%COMP%]{background-color:#28a745;border:none;color:#fff;transition:background-color .3s}.card[_ngcontent-%COMP%]   .btn-custom[_ngcontent-%COMP%]:hover{background-color:#218838}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;text-align:left}.avatar[_ngcontent-%COMP%]{width:75px;height:75px;border-radius:50%;margin-right:10px;vertical-align:middle}"]})};function Ct(a,e){if(a&1&&(i(0,"span",25),r(1),t()),a&2){let o=f();l(),C(o.selectedFile.name)}}function Mt(a,e){if(a&1&&(i(0,"div",26),r(1),t()),a&2){let o=f();l(),x(" ",o.errorMessage," ")}}function xt(a,e){if(a&1&&(i(0,"div",27),r(1),t()),a&2){let o=f();l(),x(" ",o.successMessage," ")}}function Pt(a,e){a&1&&u(0,"span",28)}var he=j(M.apiUrl,M.publicAnonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1,storageKey:"sb-auth-xyz"}}),Ce=class a{constructor(e){this.router=e}email="";password="";name="";age=0;selectedFile=null;showVerificationMessage=!1;isLoading=!1;errorMessage=null;successMessage=null;ngOnInit(){let e=localStorage.getItem("swapUserMail");e&&(this.email=e)}onFileSelected(e){this.selectedFile=e.target.files[0]}register(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage=null,this.successMessage=null;try{if(this.age<5||this.age>90){this.errorMessage="Por favor, ingrese una edad v\xE1lida (entre 1 y 120 a\xF1os).",this.isLoading=!1;return}let{data:e,error:o}=yield he.auth.signUp({email:this.email,password:this.password,options:{data:{name:this.name,age:this.age}}});if(console.log("Respuesta de signUp:",e,o),o)throw console.error("Error en signUp:",o),o;let n=null;this.selectedFile&&e.user&&(n=yield this.saveFile(e.user.id)),e.user&&(yield this.saveUserData(e.user,n)),localStorage.removeItem("UserMailRegistered"),localStorage.removeItem("UserPWDRegisted"),localStorage.setItem("UserMailRegistered",this.email),localStorage.setItem("UserPWDRegisted",this.password),this.showVerificationMessage=!0,this.successMessage="\xA1Registro exitoso!",setTimeout(()=>{this.router.navigate(["/login"])},2e3)}catch(e){console.error("Error:",e),this.errorMessage=this.getErrorMessage(e)}finally{this.isLoading=!1}})}saveUserData(e,o){return b(this,null,function*(){let{error:n}=yield he.from("users-data").insert([{authId:e.id,name:this.name,age:this.age,avatarUrl:o}]);if(n)throw n})}getErrorMessage(e){return console.log("Error: ",e),e.message.includes("Password")?"La contrase\xF1a debe tener al menos 6 caracteres":e.message.includes("Unable to validate email")?"El formato del correo electr\xF3nico es inv\xE1lido":e.message.includes("insert or update on table")||e.message.includes("The resource already exists")?"Este correo ya est\xE1 registrado":"Error al registrar. Intente nuevamente."}saveFile(e){return b(this,null,function*(){if(!this.selectedFile)return null;let o=`users/${e}/${this.selectedFile.name}`,{data:n,error:s}=yield he.storage.from("images").upload(o,this.selectedFile,{cacheControl:"3600",upsert:!1});if(s)throw s;let{data:{publicUrl:m}}=he.storage.from("images").getPublicUrl(o);return m})}static \u0275fac=function(o){return new(o||a)(g(k))};static \u0275cmp=v({type:a,selectors:[["app-register"]],decls:40,vars:9,consts:[[1,"register-container"],[1,"register-card"],[1,"register-title"],[1,"register-form",3,"ngSubmit"],[1,"form-group"],["for","email",1,"form-label"],["id","email","type","text","name","email","placeholder","ejemplo123","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["id","password","type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","name",1,"form-label"],["id","name","type","text","name","name","placeholder","Pepe Argento","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","age",1,"form-label"],["id","age","type","number","name","age","placeholder","25","min","5","max","90","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","avatar",1,"form-label"],[1,"file-input-container"],["id","avatar","type","file","accept","image/*",1,"file-input",3,"change"],["for","avatar",1,"file-input-label"],[1,"bi","bi-upload"],["class","file-name",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit",1,"btn","btn-register",3,"disabled"],["class","spinner",4,"ngIf"],[1,"login-link-container"],["routerLink","../login",1,"login-link"],[1,"file-name"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"spinner"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Registro de Usuario"),t(),i(4,"form",3),p("ngSubmit",function(){return n.register()}),i(5,"div",4)(6,"label",5),r(7,"Correo"),t(),i(8,"input",6),T("ngModelChange",function(m){return N(n.email,m)||(n.email=m),m}),t()(),i(9,"div",4)(10,"label",7),r(11,"Contrase\xF1a"),t(),i(12,"input",8),T("ngModelChange",function(m){return N(n.password,m)||(n.password=m),m}),t()(),i(13,"div",4)(14,"label",9),r(15,"Nombre completo"),t(),i(16,"input",10),T("ngModelChange",function(m){return N(n.name,m)||(n.name=m),m}),t()(),i(17,"div",4)(18,"label",11),r(19,"Edad"),t(),i(20,"input",12),T("ngModelChange",function(m){return N(n.age,m)||(n.age=m),m}),t()(),i(21,"div",4)(22,"label",13),r(23,"Foto de perfil"),t(),i(24,"div",14)(25,"input",15),p("change",function(m){return n.onFileSelected(m)}),t(),i(26,"label",16),u(27,"i",17),r(28," Seleccionar archivo "),t(),d(29,Ct,2,1,"span",18),t()(),d(30,Mt,2,1,"div",19)(31,xt,2,1,"div",20),i(32,"button",21),r(33," Registrarse "),d(34,Pt,1,0,"span",22),t(),i(35,"div",23)(36,"p"),r(37,"\xBFYa tienes una cuenta? "),i(38,"a",24),r(39,"Inicia sesi\xF3n"),t()()()()()()),o&2&&(l(8),U("ngModel",n.email),l(4),U("ngModel",n.password),l(4),U("ngModel",n.name),l(4),U("ngModel",n.age),l(9),c("ngIf",n.selectedFile),l(),c("ngIf",n.errorMessage),l(),c("ngIf",n.successMessage),l(),c("disabled",n.isLoading),l(2),c("ngIf",n.isLoading))},dependencies:[Q,Z,Y,le,D,K,pe,$e,Xe,ae,Ze,re,_,P],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:2rem;background:linear-gradient(135deg,#b507071a,#fffc)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000001a;padding:2.5rem;width:100%;max-width:500px;transition:all .3s ease}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]:hover{box-shadow:0 15px 35px #00000026}.register-container[_ngcontent-%COMP%]   .register-title[_ngcontent-%COMP%]{color:#b50707;font-family:Poppins,sans-serif;font-weight:600;text-align:center;margin-bottom:2rem;font-size:1.8rem}.register-container[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.register-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.register-container[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:500;color:#333;font-size:.9rem}.register-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;transition:all .3s ease;background-color:#ffffffe6}.register-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#b50707;box-shadow:0 0 0 3px #b5070733;outline:none}.register-container[_ngcontent-%COMP%]   .form-control[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.register-container[_ngcontent-%COMP%]   .form-control[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .register-container[_ngcontent-%COMP%]   .form-control[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.register-container[_ngcontent-%COMP%]   .file-input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:1rem}.register-container[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.register-container[_ngcontent-%COMP%]   .file-input-label[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#f8f9fa;color:#333;border:1px dashed #ddd;border-radius:8px;font-family:Poppins,sans-serif;font-size:.9rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.register-container[_ngcontent-%COMP%]   .file-input-label[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#b50707}.register-container[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.register-container[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:.75rem;border-radius:8px;font-family:Poppins,sans-serif;font-weight:500;border:none;cursor:pointer;transition:all .3s ease;width:100%;margin-top:1rem}.register-container[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]:hover{background-color:#1e7e34;transform:translateY(-2px)}.register-container[_ngcontent-%COMP%]   .login-link-container[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-family:Poppins,sans-serif;font-size:.9rem;color:#6c757d}.register-container[_ngcontent-%COMP%]   .login-link-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.register-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{color:#b50707;text-decoration:none;font-weight:500}.register-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.verification-message[_ngcontent-%COMP%]{margin-top:.1rem;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.verification-message[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1.5rem;border-radius:8px;background-color:#d4edda;color:#155724;border-left:4px solid #28a745}.verification-message[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;font-family:Poppins,sans-serif}.verification-message[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da!important;color:#721c24!important;border-left-color:#dc3545!important;margin-top:.5rem}.btn-register[_ngcontent-%COMP%]{position:relative}.btn-register[_ngcontent-%COMP%]:disabled{background-color:#6c757d!important;cursor:not-allowed}.btn-register[_ngcontent-%COMP%]:disabled:hover{transform:none!important}.btn-register[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite;margin-left:10px;vertical-align:middle}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.register-prompt[_ngcontent-%COMP%]{transition:all .3s ease}.register-prompt.checking[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]})};var Me=class a{static \u0275fac=function(o){return new(o||a)};static \u0275cmp=v({type:a,selectors:[["app-profile"]],decls:68,vars:0,consts:[[1,"card","mb-3","card-custom"],[1,"row","g-0"],[1,"card-header"],["src","perfil.jpeg","alt","...",1,"avatar"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"mb-1"],[1,"section-title"],[1,"game-list"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),u(3,"img",3),t(),i(4,"div",4)(5,"div",5)(6,"h5",6),r(7,"Teruel Elias"),t(),i(8,"p",7)(9,"strong"),r(10,"DNI:"),t(),r(11," 39333529"),t(),i(12,"p",7)(13,"strong"),r(14,"Email:"),t(),r(15," eliasteruel96@gmail.com"),t(),u(16,"hr"),i(17,"p",8)(18,"strong"),r(19,"\u{1F3AE} Mi juego se trata de: 2048"),t()(),i(20,"p",9),r(21,"\u{1F9E9} "),i(22,"strong"),r(23,"Resumen:"),t()(),i(24,"p"),r(25,"2048 es un juego de puzzle en el que ten\xE9s que mover fichas con n\xFAmeros para sumarlas entre s\xED hasta llegar al n\xFAmero "),i(26,"strong"),r(27,"2048"),t(),r(28,"."),t(),i(29,"p",9),r(30,"\u{1F3AF} "),i(31,"strong"),r(32,"C\xF3mo se juega:"),t()(),i(33,"ul",10)(34,"li")(35,"strong"),r(36,"Tablero:"),t(),r(37," Una cuadr\xEDcula de 4x4. Empieza con dos fichas con el n\xFAmero 2 (o 4)."),t(),i(38,"li")(39,"strong"),r(40,"Movimiento:"),t(),r(41," Us\xE1s las flechas del teclado para mover todas las fichas."),t(),i(42,"li")(43,"strong"),r(44,"Fusi\xF3n:"),t(),r(45," Dos fichas iguales se suman: 2 + 2 = 4, 4 + 4 = 8, etc."),t(),i(46,"li")(47,"strong"),r(48,"Objetivo:"),t(),r(49," Llegar a una ficha de "),i(50,"strong"),r(51,"2048"),t(),r(52,"."),t(),i(53,"li")(54,"strong"),r(55,"Fin del juego:"),t(),r(56," Se termina cuando no quedan movimientos posibles."),t()(),i(57,"p",9),r(58,"\u{1F9E0} "),i(59,"strong"),r(60,"Estrategia b\xE1sica:"),t()(),i(61,"ul",10)(62,"li"),r(63,"Manten\xE9 tu ficha m\xE1s alta en una esquina."),t(),i(64,"li"),r(65,"Evit\xE1 mover hacia arriba si rompe tu orden."),t(),i(66,"li"),r(67,"Plane\xE1 pensando en fusiones futuras."),t()()()()()())},styles:[".card-custom[_ngcontent-%COMP%]{max-width:700px;border:1px solid #ccc;border-radius:10px;box-shadow:2px 2px 12px #0000001a;margin:50px auto;background-color:#fff}.card-body[_ngcontent-%COMP%]{padding:1.2rem;font-size:1.1rem}.card-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#333;margin-bottom:1rem}.section-title[_ngcontent-%COMP%]{margin-top:1rem;font-weight:700;color:#333}.game-list[_ngcontent-%COMP%]{padding-left:1.2rem;margin-bottom:.5rem}.game-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.4rem}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2456fb,#6b4c90);padding:20px;text-align:center;position:relative;display:flex;justify-content:center}.avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;border:4px solid white;object-fit:cover;box-shadow:0 2px 10px #0003}"]})};function St(a,e){if(a&1&&(i(0,"div",0)(1,"div",2),u(2,"img",3),i(3,"h3"),r(4),t()(),i(5,"div",4)(6,"div",5)(7,"span",6),r(8,"Email:"),t(),i(9,"span",7),r(10),t()(),i(11,"div",5)(12,"span",6),r(13,"Edad:"),t(),i(14,"span",7),r(15),t()(),i(16,"div",5)(17,"span",6),r(18,"\xDAltimo inicio de sesi\xF3n:"),t(),i(19,"span",7),r(20),ne(21,"date"),t()()()()),a&2){let o=f();l(2),c("src",o.getAvatarUrl(o.userData.avatarUrl),Ne),l(2),C(o.userData.name),l(6),C(o.userData.authEmail),l(5),C(o.userData.age),l(5),C(ie(21,5,o.userData.last_login,"dd/MM/yyyy HH:mm"))}}function yt(a,e){a&1&&(i(0,"div",1)(1,"p"),r(2,"No est\xE1s logueado o no tienes un perfil creado."),t()())}var it=j(M.apiUrl,M.publicAnonKey),xe=class a{constructor(e){this.supabaseService=e}userData=null;authSubscription;lastLogin=null;ngOnInit(){this.authSubscription=this.supabaseService.authChanges.subscribe(e=>{e?this.getCurrentUserData(e.user.id,e.user.email):this.userData=null}),this.supabaseService.getSession().then(e=>{e?.user&&this.getCurrentUserData(e.user.id,e.user.email)})}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}getCurrentUserData(e,o){return b(this,null,function*(){let{data:n,error:s}=yield it.from("users-data").select("*").eq("authId",e).single();s?console.error("Error:",s.message):(console.log("User data:",n),this.userData=Ae(Le({},n),{authEmail:o}))})}getAvatarUrl(e){console.log("Getting public URL for avatar:",e);let o=null;if(e.startsWith("http"))return console.warn("Avatar URL is already a full URL:",e),e;let{data:n}=it.storage.from("images").getPublicUrl(e);return n?n?.publicUrl?(console.log("Public URL fetched successfully:",n.publicUrl),n.publicUrl):(console.warn("No public URL returned for avatar"),null):(console.error("Error fetching public URL for avatar: No data returned"),null)}static \u0275fac=function(o){return new(o||a)(g(L))};static \u0275cmp=v({type:a,selectors:[["app-about"]],decls:4,vars:1,consts:[[1,"profile-card"],[1,"not-logged-message"],[1,"card-header"],["alt","Foto de perfil",1,"avatar",3,"src"],[1,"card-body"],[1,"info-item"],[1,"label"],[1,"value"]],template:function(o,n){o&1&&(i(0,"h2"),r(1,"Mi perfil"),t(),d(2,St,22,8,"div",0)(3,yt,3,0,"div",1)),o&2&&(l(2),Te(n.userData?2:3))},dependencies:[_,oe],styles:['.profile-card[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;overflow:hidden;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;transition:transform .3s ease,box-shadow .3s ease}.profile-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 16px #00000026}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2456fb,#6b4c90);color:#fff;padding:25px;text-align:center;position:relative}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:15px 0 0;font-size:1.5rem}.card-body[_ngcontent-%COMP%]{padding:20px}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;border:4px solid white;object-fit:cover;box-shadow:0 2px 10px #0003}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #f0f0f0}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{font-weight:600;color:#555}.value[_ngcontent-%COMP%]{color:#333}.not-logged-message[_ngcontent-%COMP%]{text-align:center;padding:30px;background:#f8f9fa;border-radius:8px;max-width:500px;margin:20px auto}.not-logged-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:1.1rem}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:25px;font-size:2rem;position:relative}h2[_ngcontent-%COMP%]:after{content:"";display:block;width:60px;height:3px;background:linear-gradient(135deg,#527aff,#a777e3);margin:10px auto 0}']})};var Pe=class a{constructor(e){this.supabaseService=e}saveEncuesta(e){return b(this,null,function*(){let o={nombre:e.nombre,apellido:e.apellido,edad:e.edad,telefono:e.telefono,estrellas:e.estrellas,juegos_favoritos:e.juegosFavoritos,juego_a_agregar:e.juegosAdd,usuario_email:localStorage.getItem("savedUserMail")},{error:n}=yield this.supabaseService.client.from("encuestas").insert(o);if(n)throw console.error("Error al guardar la encuesta:",n),n})}static \u0275fac=function(o){return new(o||a)(te(L))};static \u0275prov=ee({token:a,factory:a.\u0275fac,providedIn:"root"})};var Se=a=>({"input-error":a}),Et=(a,e)=>({"alert-success":a,"alert-danger":e});function It(a,e){a&1&&(i(0,"div",37),r(1," Este campo es obligatorio. "),t())}function wt(a,e){a&1&&(i(0,"div",37),r(1," Este campo es obligatorio. "),t())}function Ft(a,e){a&1&&(i(0,"div",37),r(1," Debes ingresar una edad entre 18 y 99 a\xF1os. "),t())}function kt(a,e){a&1&&(i(0,"div",37),r(1," El n\xFAmero de tel\xE9fono debe contener entre 8 y 10 d\xEDgitos. "),t())}function Dt(a,e){a&1&&(i(0,"div",37),r(1," Debes seleccionar una opci\xF3n. "),t())}function jt(a,e){a&1&&(i(0,"div",37),r(1,` Debes seleccionar al menos un juego favorito.
`),t())}function Lt(a,e){a&1&&(i(0,"div",37),r(1," Debes seleccionar una opci\xF3n. "),t())}function At(a,e){if(a&1&&(i(0,"div",38),r(1),t()),a&2){let o=f();c("ngClass",Re(2,Et,o.mensajeFinal.includes("exitosamente"),!o.mensajeFinal.includes("exitosamente"))),l(),x(" ",o.mensajeFinal,`
`)}}var ye=class a{constructor(e,o,n){this.authService=e;this.fb=o;this.encuestaService=n;this.encuestaForm=this.fb.group({nombre:["",h.required],apellido:["",h.required],edad:["",[h.required,h.min(18),h.max(99)]],telefono:["",[h.required,h.pattern("^[0-9]{8,10}$")]],estrellas:["",h.required],juegosFavoritos:this.fb.array([],h.required),juegosAdd:["",h.required]})}encuestaForm;mensajeFinal="";mensaje="";onCheckboxChange(e){let o=this.encuestaForm.get("juegosFavoritos");if(e.target.checked)o.push(this.fb.control(e.target.value));else{let n=o.controls.findIndex(s=>s.value===e.target.value);o.removeAt(n)}}ngOnInit(){this.authService.userInfo$.subscribe(e=>{e?console.log("Usuario cargado:",e):console.log("Error al obtener la informaci\xF3n del usuario")})}onSubmit(){return b(this,null,function*(){if(this.encuestaForm.valid)try{let e=this.encuestaForm.value;yield this.encuestaService.saveEncuesta(e),this.mensajeFinal="Encuesta guardada exitosamente",this.encuestaForm.reset(),this.encuestaForm.get("juegosFavoritos").clear()}catch(e){console.error("Error al guardar la encuesta:",e),this.mensajeFinal="Hubo un error al guardar la encuesta"}else this.encuestaForm.markAllAsTouched(),this.mensaje="Por favor completa todos los campos correctamente"})}static \u0275fac=function(o){return new(o||a)(g(S),g(ge),g(Pe))};static \u0275cmp=v({type:a,selectors:[["app-encuesta"]],decls:95,vars:24,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-md-6","offset-md-3"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre","required","",1,"form-control",3,"ngClass"],["class","error-message",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","formControlName","apellido","required","",1,"form-control",3,"ngClass"],["for","edad",1,"form-label"],["type","number","id","edad","formControlName","edad","required","",1,"form-control",3,"ngClass"],["for","telefono",1,"form-label"],["type","number","id","telefono","formControlName","telefono","required","",1,"form-control",3,"ngClass"],[1,"form-label"],[1,"star-rating"],["type","radio","formControlName","estrellas","value","1","required",""],[1,"fas","fa-star","star"],["type","radio","formControlName","estrellas","value","2","required",""],["type","radio","formControlName","estrellas","value","3","required",""],["type","radio","formControlName","estrellas","value","4","required",""],["type","radio","formControlName","estrellas","value","5","required",""],[1,"checkbox-group"],["type","checkbox","value","2048",3,"change"],["type","checkbox","value","Mayor o Menor",3,"change"],["type","checkbox","value","Preguntados",3,"change"],["type","checkbox","value","Ahorcado",3,"change"],["formControlName","juegosAdd","required","",1,"form-select"],["value","","selected",""],["value","Tateti"],["value","Memotest"],["value","Piedra Papel o Tijera"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","alert",3,"ngClass",4,"ngIf"],[1,"error-message"],[1,"alert",3,"ngClass"]],template:function(o,n){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),r(5,"Encuesta"),t(),i(6,"div",5)(7,"form",6),p("ngSubmit",function(){return n.onSubmit()}),i(8,"h2"),r(9),t(),i(10,"div",7)(11,"label",8),r(12,"Nombre"),t(),u(13,"input",9),d(14,It,2,0,"div",10),t(),i(15,"div",7)(16,"label",11),r(17,"Apellido"),t(),u(18,"input",12),d(19,wt,2,0,"div",10),t(),i(20,"div",7)(21,"label",13),r(22,"Edad"),t(),u(23,"input",14),d(24,Ft,2,0,"div",10),t(),i(25,"div",7)(26,"label",15),r(27,"N\xFAmero de Tel\xE9fono"),t(),u(28,"input",16),d(29,kt,2,0,"div",10),t(),i(30,"div",7)(31,"label",17),r(32,"\xBFCu\xE1ntas estrellas le das a la p\xE1gina?"),t(),i(33,"div",18)(34,"label"),u(35,"input",19)(36,"i",20),t(),i(37,"label"),u(38,"input",21)(39,"i",20)(40,"i",20),t(),i(41,"label"),u(42,"input",22)(43,"i",20)(44,"i",20)(45,"i",20),t(),i(46,"label"),u(47,"input",23)(48,"i",20)(49,"i",20)(50,"i",20)(51,"i",20),t(),i(52,"label"),u(53,"input",24)(54,"i",20)(55,"i",20)(56,"i",20)(57,"i",20)(58,"i",20),t()(),d(59,Dt,2,0,"div",10),t(),i(60,"div",7)(61,"label",17),r(62,"Selecciona tus Juegos favoritos"),t(),i(63,"div",25)(64,"label")(65,"input",26),p("change",function(m){return n.onCheckboxChange(m)}),t(),r(66," 2048 "),t(),i(67,"label")(68,"input",27),p("change",function(m){return n.onCheckboxChange(m)}),t(),r(69," Mayor o Menor "),t(),i(70,"label")(71,"input",28),p("change",function(m){return n.onCheckboxChange(m)}),t(),r(72," Preguntados "),t(),i(73,"label")(74,"input",29),p("change",function(m){return n.onCheckboxChange(m)}),t(),r(75," Ahorcado "),t()()(),d(76,jt,2,0,"div",10),i(77,"div",7)(78,"label",17),r(79,"Elige el juego que quisieras agregar a la p\xE1gina"),t(),i(80,"select",30)(81,"option",31),r(82,"Selecciona una opci\xF3n"),t(),i(83,"option",32),r(84,"Tateti"),t(),i(85,"option",33),r(86,"Memotest"),t(),i(87,"option",34),r(88,"Piedra Papel o Tijera"),t()(),d(89,Lt,2,0,"div",10),t(),i(90,"button",35),r(91,"Enviar"),t(),i(92,"h2"),r(93),t(),d(94,At,2,5,"div",36),t()()()()()()),o&2){let s,m,R,W,V,q,z,H,B,G,J;l(7),c("formGroup",n.encuestaForm),l(2),C(n.mensaje),l(4),c("ngClass",$(16,Se,((s=n.encuestaForm.get("nombre"))==null?null:s.invalid)&&(((s=n.encuestaForm.get("nombre"))==null?null:s.touched)||((s=n.encuestaForm.get("nombre"))==null?null:s.dirty)))),l(),c("ngIf",((m=n.encuestaForm.get("nombre"))==null?null:m.invalid)&&(((m=n.encuestaForm.get("nombre"))==null?null:m.touched)||((m=n.encuestaForm.get("nombre"))==null?null:m.dirty))),l(4),c("ngClass",$(18,Se,((R=n.encuestaForm.get("apellido"))==null?null:R.invalid)&&(((R=n.encuestaForm.get("apellido"))==null?null:R.touched)||((R=n.encuestaForm.get("apellido"))==null?null:R.dirty)))),l(),c("ngIf",((W=n.encuestaForm.get("apellido"))==null?null:W.invalid)&&(((W=n.encuestaForm.get("apellido"))==null?null:W.touched)||((W=n.encuestaForm.get("apellido"))==null?null:W.dirty))),l(4),c("ngClass",$(20,Se,((V=n.encuestaForm.get("edad"))==null?null:V.invalid)&&(((V=n.encuestaForm.get("edad"))==null?null:V.touched)||((V=n.encuestaForm.get("edad"))==null?null:V.dirty)))),l(),c("ngIf",((q=n.encuestaForm.get("edad"))==null?null:q.invalid)&&(((q=n.encuestaForm.get("edad"))==null?null:q.touched)||((q=n.encuestaForm.get("edad"))==null?null:q.dirty))),l(4),c("ngClass",$(22,Se,((z=n.encuestaForm.get("telefono"))==null?null:z.invalid)&&(((z=n.encuestaForm.get("telefono"))==null?null:z.touched)||((z=n.encuestaForm.get("telefono"))==null?null:z.dirty)))),l(),c("ngIf",((H=n.encuestaForm.get("telefono"))==null?null:H.invalid)&&(((H=n.encuestaForm.get("telefono"))==null?null:H.touched)||((H=n.encuestaForm.get("telefono"))==null?null:H.dirty))),l(30),c("ngIf",((B=n.encuestaForm.get("estrellas"))==null?null:B.invalid)&&(((B=n.encuestaForm.get("estrellas"))==null?null:B.touched)||((B=n.encuestaForm.get("estrellas"))==null?null:B.dirty))),l(17),c("ngIf",((G=n.encuestaForm.get("juegosFavoritos"))==null?null:G.invalid)&&(((G=n.encuestaForm.get("juegosFavoritos"))==null?null:G.touched)||((G=n.encuestaForm.get("juegosFavoritos"))==null?null:G.dirty))),l(13),c("ngIf",((J=n.encuestaForm.get("juegosAdd"))==null?null:J.invalid)&&(((J=n.encuestaForm.get("juegosAdd"))==null?null:J.touched)||((J=n.encuestaForm.get("juegosAdd"))==null?null:J.dirty))),l(),c("disabled",!n.encuestaForm.valid),l(3),C(n.mensajeFinal),l(),c("ngIf",n.mensajeFinal)}},dependencies:[fe,Z,de,ue,Y,le,me,Qe,D,K,pe,se,ce,_,Ve,P],styles:[".star[_ngcontent-%COMP%]{color:#fc0;font-size:1.5rem;margin-right:.2rem}label[_ngcontent-%COMP%]{margin-right:.55rem;display:inline-flex;align-items:center}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:1.1rem;padding:.75rem}.container[_ngcontent-%COMP%]{background-color:#f2f6f1;padding:2rem;border-radius:12px;box-shadow:0 0 15px #0000001a}.card[_ngcontent-%COMP%]{border:none;background-color:#d2fcb4e9;border-radius:12px;box-shadow:0 4px 10px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff;font-size:1.2rem;text-transform:uppercase;text-align:center}.form-select[_ngcontent-%COMP%]{border:2px solid #2ecc71;border-radius:8px;transition:all .3s ease}.form-select[_ngcontent-%COMP%]:focus{border-color:#27ae60;box-shadow:0 0 8px #2ecc71}.form-control[_ngcontent-%COMP%]{border:2px solid #2ecc71;border-radius:8px;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#27ae60;box-shadow:0 0 8px #2ecc71}p[_ngcontent-%COMP%]{font-size:1rem;color:#2d3436}.mb-3[_ngcontent-%COMP%]{margin-bottom:1.1rem}.input-error[_ngcontent-%COMP%]{border:1px solid red}.error-message[_ngcontent-%COMP%]{color:red;font-size:.875rem;margin-top:.25rem}.btn[_ngcontent-%COMP%]{background-color:#0af;color:#fff;transition:background-color .3s,color .3s}.btn[_ngcontent-%COMP%]:hover:not(.disabled){background-color:#0065b3}.btn.disabled[_ngcontent-%COMP%]{background-color:#ccc;color:#666;cursor:not-allowed}"]})};function Ut(a,e){if(a&1&&(i(0,"tr")(1,"th",18),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),r(8),ne(9,"date"),t()()),a&2){let o=e.$implicit,n=e.index;l(2),C(n+1),l(2),C(o.email),l(2),C(o.score),l(2),C(ie(9,4,o.date,"short"))}}var Oe=class a{constructor(e,o){this.scoreService=e;this.authService=o}userInfo;ranking=[];userScore=0;userRank=0;rankingVisible=!1;game="Juego 2048";ngOnInit(){this.authService.userInfo$.subscribe(e=>{e?(this.userInfo=e,this.loadUserScoreAndRank()):console.log("error")})}loadUserScoreAndRank(){return b(this,null,function*(){try{let e=localStorage.getItem("savedUserMail")||"",o=yield this.scoreService.getScoresByGame(this.game);this.ranking=o.sort((s,m)=>(m.score||0)-(s.score||0));let n=this.ranking.find(s=>s.email===e);this.userScore=n?n.score:0,this.userRank=this.ranking.findIndex(s=>s.email===e)+1,this.rankingVisible=!0}catch(e){console.error("Error al cargar el ranking:",e)}})}static \u0275fac=function(o){return new(o||a)(g(tt),g(S))};static \u0275cmp=v({type:a,selectors:[["app-puntajes"]],decls:44,vars:4,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-md-6","offset-md-3"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],["for","gameSelect",1,"form-label"],["id","gameSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value","Juego 2048"],["value","MayorMenor"],["value","preguntados"],["value","ahorcado"],[1,"row","mt-5"],[1,"col-md-8","offset-md-2"],[1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),r(5,"Puntaje del Usuario"),t(),i(6,"div",5)(7,"div",6)(8,"label",7),r(9,"Selecciona un juego"),t(),i(10,"select",8),T("ngModelChange",function(m){return N(n.game,m)||(n.game=m),m}),p("change",function(){return n.loadUserScoreAndRank()}),i(11,"option",9),r(12,"Juego 2048"),t(),i(13,"option",10),r(14,"MayorMenor"),t(),i(15,"option",11),r(16,"Preguntados"),t(),i(17,"option",12),r(18,"Ahorcado"),t()()(),i(19,"p")(20,"strong"),r(21,"Puntaje:"),t(),r(22),t(),i(23,"p")(24,"strong"),r(25,"Posici\xF3n en el Ranking:"),t(),r(26),t()()()()(),i(27,"div",13)(28,"div",14)(29,"h4"),r(30,"Ranking de Jugadores"),t(),i(31,"table",15)(32,"thead")(33,"tr")(34,"th",16),r(35,"Posici\xF3n"),t(),i(36,"th",16),r(37,"Jugador"),t(),i(38,"th",16),r(39,"Puntaje"),t(),i(40,"th",16),r(41,"Fecha"),t()()(),i(42,"tbody"),d(43,Ut,10,7,"tr",17),t()()()()()),o&2&&(l(10),U("ngModel",n.game),l(12),x(" ",n.userScore,""),l(4),x(" ",n.userRank>0?n.userRank:"No disponible"," "),l(17),c("ngForOf",n.ranking))},dependencies:[Q,de,ue,me,D,ae,_,qe,oe],styles:["table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:default}.container[_ngcontent-%COMP%]{background-color:#f2f6f1;padding:2rem;border-radius:12px;box-shadow:0 0 15px #0000001a}h4[_ngcontent-%COMP%]{color:#2ecc71;font-weight:700;text-align:center}.card[_ngcontent-%COMP%]{border:none;background-color:#b8e994;border-radius:12px;box-shadow:0 4px 10px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff;font-size:1.2rem;text-transform:uppercase}.form-select[_ngcontent-%COMP%]{border:2px solid #2ecc71;border-radius:8px;transition:all .3s ease}.form-select[_ngcontent-%COMP%]:focus{border-color:#27ae60;box-shadow:0 0 8px #2ecc71}.table[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 0 12px #0000000d}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#145a32;color:#fff;text-align:center}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;color:#2d3436;font-weight:500}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#b8e994}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d4f2be;transition:background-color .3s}p[_ngcontent-%COMP%]{font-size:1rem;color:#2d3436}"]})};var ot=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:_e},{path:"about",component:xe},{path:"register",component:Ce},{path:"login",component:ve},{path:"chat",component:et},{path:"puntajes",component:Oe},{path:"encuesta",component:ye},{path:"profile",component:Me},{path:"chat",loadComponent:()=>import("./chunk-WSQV5JEB.js").then(a=>a.ChatComponent)},{path:"games",loadChildren:()=>import("./chunk-PMMZW4FM.js").then(a=>a.GamesModule)}];var rt={providers:[We({eventCoalescing:!0}),Ye(ot),He()]};function Nt(a,e){if(a&1&&(I(0),i(1,"p",9),r(2),t(),w()),a&2){let o=f();l(2),x("Bienvenido, ",o.email,"")}}function Tt(a,e){a&1&&(I(0),i(1,"a",10),r(2,"Iniciar sesi\xF3n"),t(),i(3,"a",11),r(4,"Registrar"),t(),w())}function Rt(a,e){if(a&1){let o=F();I(0),i(1,"a",12),r(2,"Mis Datos"),t(),i(3,"a",13),r(4,"Encuesta"),t(),i(5,"a",14),r(6,"Puntajes"),t(),i(7,"a",15),r(8,"Chat"),t(),i(9,"a",16),p("click",function(){O(o);let s=f();return E(s.logout())}),r(10,"Cerrar Sesi\xF3n"),t(),w()}}var Ee=class a{constructor(e,o,n){this.supabase=e;this.router=o;this.authService=n}isMenuOpen=!1;isLoggedIn=!1;authSubscription;email;ngOnInit(){this.authSubscription=this.supabase.authChanges.subscribe(e=>{this.isLoggedIn=!!e}),this.email=this.authService.getCurrentUserEmail(),console.log(this.email),this.supabase.getSession().then(e=>{this.isLoggedIn=!!e})}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}logout(){return b(this,null,function*(){yield this.supabase.signOut(),this.authService.clearUserInfo(),this.router.navigate(["/login"])})}static \u0275fac=function(o){return new(o||a)(g(L),g(k),g(S))};static \u0275cmp=v({type:a,selectors:[["app-navbar"]],decls:16,vars:3,consts:[[1,"navbar"],[1,"navbar-container"],["routerLink","/home",1,"navbar-brand"],[4,"ngIf"],[1,"navbar-links"],["routerLink","/home","routerLinkActive","active"],["routerLink","/profile","routerLinkActive","active"],[1,"navbar-toggle",3,"click"],[1,"icon-bar"],[1,"navbar-description"],["routerLink","/login","routerLinkActive","active"],["routerLink","/register","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/encuesta","routerLinkActive","active"],["routerLink","/puntajes","routerLinkActive","active-route"],["routerLink","/chat","routerLinkActive","active"],[2,"cursor","pointer",3,"click"]],template:function(o,n){o&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),r(3,"Sala de Juegos "),t(),d(4,Nt,3,1,"ng-container",3),i(5,"div",4)(6,"a",5),r(7,"Inicio"),t(),d(8,Tt,5,0,"ng-container",3)(9,Rt,11,0,"ng-container",3),i(10,"a",6),r(11,"Sobre Mi"),t()(),i(12,"button",7),p("click",function(){return n.toggleMenu()}),u(13,"span",8)(14,"span",8)(15,"span",8),t()()()),o&2&&(l(4),c("ngIf",n.isLoggedIn),l(4),c("ngIf",!n.isLoggedIn),l(),c("ngIf",n.isLoggedIn))},dependencies:[_,P,Ke,re,Je],styles:[".navbar[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;padding:1rem 2rem;box-shadow:0 2px 5px #0000001a}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;text-decoration:none}.navbar-links[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.navbar-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:opacity .3s}.navbar-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:700;border-bottom:2px solid white}.navbar-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer}.navbar-mobile[_ngcontent-%COMP%]{display:none;flex-direction:column;background:#3f51b5;padding:1rem;gap:1rem}.navbar-mobile[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:.5rem 0}.navbar-mobile[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.8}@media (max-width: 768px){.navbar-links[_ngcontent-%COMP%]{display:none!important}.navbar-toggle[_ngcontent-%COMP%]{display:block!important}.navbar-mobile[_ngcontent-%COMP%]{display:flex!important}}.navbar-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.8}.navbar-links[_ngcontent-%COMP%]   a.logout-link[_ngcontent-%COMP%]{color:#f44}.navbar-links[_ngcontent-%COMP%]   a.logout-link[_ngcontent-%COMP%]:hover{color:#c00}"]})};var Ie=class a{title="Sala de Juegos";static \u0275fac=function(o){return new(o||a)};static \u0275cmp=v({type:a,selectors:[["app-root"]],decls:2,vars:0,template:function(o,n){o&1&&u(0,"app-navbar")(1,"router-outlet")},dependencies:[_,Ge,Ee,nt],encapsulation:2})};Be(Ie,rt).catch(a=>console.error(a));
